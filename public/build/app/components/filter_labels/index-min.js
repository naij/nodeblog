KISSY.add("components/filter_labels/index",function(t,e,a){var n=t.all,i=e.extend({bindUI:function(){var e=this.get("el"),a=this,i=e.all(".J_labelGroup");t.later(function(){t.each(i,function(t){var t=n(t),e=t.all("[data-filterId]");a._detectLayout(t,e)})},150);var r;this._resizeDetect=function(){r&&r.cancel(),r=t.later(function(){t.each(e.all(".J_labelGroup"),function(t){var t=n(t),e=t.all("[data-filterId]");a._detectLayout(t,e)})},100)},t.one(window).on("resize",this._resizeDetect)},destroy:function(){t.one(window).detach("resize",this._resizeDetect)},_detectLayout:function(e,a){var i=this,r=e.one(".more");return e.children().height()>22?(r.css("display","block"),void t.each(a,function(t){var t=n(t).parent();t.hasClass("selected")&&t.offset().top>e.offset().top+1&&i._toggleGroup(e,!0)})):void r.css("display","none")},_toggleGroup:function(t,e){var a=(t.height(),t.one(".more"));e?(t.css("height","auto"),a.data("expand",!0),a.html('\u6536\u8d77<i class="icon iconfont">&#404;</i>')):(t.css("height",21),a.data("expand",!1),a.html('\u66f4\u591a<i class="icon iconfont">&#405;</i>'))}},{ATTRS:{},EVENTS:{".more":{click:function(t){t.preventDefault();var e=n(t.currentTarget);this._toggleGroup(n(t.currentTarget).parent(),!e.data("expand"))}},a:{click:function(t){t.preventDefault();var e=n(t.target);e.hasAttr("data-filterId")&&a.navigate(e.attr("data-filterName")+"="+e.attr("data-filterId"))}}}});return i.FIRES={},i.METHODS={},t.augment(i,i.METHODS),i},{requires:["brix/core/brick","magix/router"]});