KISSY.add("adv_log",function(n){var o;return{send:function(t,e){if(t){var a=window.location.hash.match(/adzoneid=(\d+)/i);a&&(t.adzoneid=a[1]);var r="http://log.mmstat.com/tblm.55.1?"+n.param(t)+"&_="+(new Date).getTime();e&&window.console&&console.log("[LOG]",t.adUrl?"[PV]":"[CLICK]","[APLUS]",JSON.stringify(t),r),o||(o=new Image),o.onerror=function(){o=null,o=new Image},o.src=r}}}},{requires:[]}),KISSY.add("hash_pv",function(){for(var n,o=["!/promotion/index/                      promotion   index                               \u8d26\u6237\u603b\u89c8","!/promotion/campaign/                   promotion   campaign                            \u8ba1\u5212\u603b\u89c8","!/promotion/taokeaudit_history/         taokeaudit  history                             \u6dd8\u5ba2\u5ba1\u6838\u8bb0\u5f55","!/report/cpa/                           report      cpa                                 \u7279\u6b8a\u5956\u52b1\u7ed3\u7b97"],t={},e=0;e<o.length;e++)n=o[e].split(/\s+/),t[n[0]]={ptype:n[1],ctype:n[2]};return t},{requires:[]}),KISSY.ready(function(n){var o=window.location.href.indexOf("?debug")>0;n.use("adv_log, hash_pv",function(n,t){n.one("body").delegate("click","[atp]",function(e){var a=n.one(e.target).attr("atp")||n.one(e.currentTarget).attr("atp")||n.one(this).attr("atp"),r=new Function("return "+a);a=r(),"undefined"==typeof a.ptype&&(a.ptype=function(){return"undefined"});var i=window.location.hash.replace(/^#/,"")||"!/promotion/index/",d=/^((?:.*)\/)(.*)$/.exec(i),p=n.unparam(d[2]);for(var c in a)"function"==typeof a[c]&&(a[c]=a[c].call(a,d[1],p));o&&(a.comment=e.target.innerText||e.target.parentNode.innerText),t.send(a,o)})}),n.use("adv_log, hash_pv",function(n,t,e){function a(){var a=window.location.hash.replace(/^#/,"")||"!/promotion/index/",r=/^((?:.*)\/)(.*)$/.exec(a),i=n.unparam(r[2]),d=i["board.archivestatus"]&&"!/board/list/archive/"||r[1],p=e[d]||{ptype:r[1],ctype:r[2]},c={};for(var s in p)c[s]=p[s];c.adUrl=location.href,t.send(c,o)}window.history&&window.history.pushState?n.Event.on(window,"popstate",a):(n.Event.on(window,"hashchange",a),a())})});